import { Observable } from 'rxjs/internal/Observable';
/**
 * Default configuration for the main module.
 * Includes a slice name, a basic reducer, an empty list of metaReducers, and no dependencies.
 */
export const defaultMainModule = {
    slice: "main",
    reducer: (state = {}) => state,
    metaReducers: [],
    dependencies: {}
};
/**
 * Determines the type of a given value.
 *
 * This function attempts to identify the underlying type of a JavaScript value
 * using a combination of checks and built-in functions.
 *
 * @param val - The value to determine the type for.
 * @returns string - A string representing the type of the value (e.g., "undefined", "string", "array", etc.).
 */
function kindOf(val) {
    if (val === undefined)
        return "undefined";
    if (val === null)
        return "null";
    const type = typeof val;
    switch (type) {
        case "boolean":
        case "string":
        case "number":
        case "symbol":
        case "function": {
            return type;
        }
    }
    if (Array.isArray(val))
        return "array";
    if (isDate(val))
        return "date";
    if (isError(val))
        return "error";
    if (isObservable(val))
        return "observable";
    if (isPromise(val))
        return "promise";
    const constructorName = ctorName(val);
    switch (constructorName) {
        case "Symbol":
        case "WeakMap":
        case "WeakSet":
        case "Map":
        case "Set":
            return constructorName;
    }
    return Object.prototype.toString.call(val).slice(8, -1).toLowerCase().replace(/\s/g, "");
}
/**
 * Attempts to get the constructor name of a value.
 *
 * This function checks if the value has a constructor that is a function,
 * and if so, it returns the name of the constructor. Otherwise, it returns null.
 *
 * @param val - The value to get the constructor name for.
 * @returns string - The name of the constructor (if applicable), otherwise null.
 */
function ctorName(val) {
    return typeof val.constructor === "function" ? val.constructor.name : null;
}
/**
 * Checks if a value is an Error object.
 *
 * This function uses two criteria to determine if a value is an Error:
 *   - It checks if the value is an instance of the built-in `Error` class.
 *   - It checks if the value has a string property named "message" and a constructor with a number property named "stackTraceLimit".
 *
 * @param val - The value to check if it's an Error.
 * @returns boolean - True if the value is an Error, false otherwise.
 */
function isError(val) {
    return val instanceof Error || typeof val.message === "string" && val.constructor && typeof val.constructor.stackTraceLimit === "number";
}
/**
 * Checks if a value is a Date object.
 *
 * This function uses two approaches to determine if a value is a Date:
 *   - It checks if the value is an instance of the built-in `Date` class.
 *   - It checks if the value has functions named `toDateString`, `getDate`, and `setDate`.
 *
 * @param val - The value to check if it's a Date.
 * @returns boolean - True if the value is a Date, false otherwise.
 */
function isDate(val) {
    if (val instanceof Date)
        return true;
    return typeof val.toDateString === "function" && typeof val.getDate === "function" && typeof val.setDate === "function";
}
/**
 * Checks if a value is a boxed primitive.
 *
 * This function checks if a value is not `undefined` or `null`, and its value doesn't strictly equal itself when called with `valueOf()`.
 * Primitive values wrapped in their corresponding object representations (e.g., new Number(10)) are considered boxed.
 *
 * @param value - The value to check if it's boxed.
 * @returns boolean - True if the value is a boxed primitive, false otherwise.
 */
function isBoxed(value) {
    return value !== undefined && value !== null && value.valueOf() !== value;
}
/**
 * Checks if a value is a Promise object.
 *
 * This function uses a trick to identify promises. It resolves the value with `Promise.resolve` and compares the resolved value with the original value.
 * If they are the same, it's likely a promise.
 *
 * @param value - The value to check if it's a Promise.
 * @returns boolean - True if the value is a Promise, false otherwise.
 */
function isPromise(value) {
    return Promise.resolve(value) == value;
}
/**
 * Checks if a value is a valid Actionstack action object.
 *
 * This function determines if the provided value is a valid action object
 * used in Actionstack for dispatching state changes.
 *
 * @param action - The value to check if it's a Actionstack action.
 * @returns boolean - True if the value is a plain object with a string property named "type", false otherwise.
 */
function isAction(action) {
    return isPlainObject(action) && "type" in action && typeof action.type === "string";
}
/**
 * Checks if a function is an async function.
 *
 * This function uses the constructor name to determine if the provided function
 * is an async function introduced in ES2018.
 *
 * @param func - The function to check if it's an async function.
 * @returns boolean - True if the function's constructor name is "AsyncFunction", false otherwise.
 */
function isAsync(func) {
    return func.constructor.name === "AsyncFunction";
}
/**
 * Checks if a value is a plain object.
 *
 * This function determines if the provided value is a plain object (an object
 * that doesn't inherit from other prototypes).
 *
 * @param obj - The value to check if it's a plain object.
 * @returns boolean - True if the value is an object and its prototype is the same as the Object.prototype, false otherwise.
 */
function isPlainObject(obj) {
    if (typeof obj !== "object" || obj === null)
        return false;
    let proto = obj;
    while (Object.getPrototypeOf(proto) !== null) {
        proto = Object.getPrototypeOf(proto);
    }
    return Object.getPrototypeOf(obj) === proto;
}
/**
 * Tests to see if the object is an RxJS {@link Observable}
 * @param obj the object to test
 */
function isObservable(obj) {
    // The !! is to ensure that this publicly exposed function returns
    // `false` if something like `null` or `0` is passed.
    return !!obj && (obj instanceof Observable || (typeof obj.lift === 'function' && typeof obj.subscribe === 'function'));
}
/**
 * Observable that immediately completes without emitting any values
 */
export const EMPTY = new Observable((subscriber) => {
    subscriber.complete();
});
export { isAction, isAsync, isBoxed, isObservable, isPlainObject, isPromise, kindOf };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidHlwZXMuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi9saWJyYXJpZXMvYWN0aW9uc3RhY2svc3RvcmUvc3JjL2xpYi90eXBlcy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsVUFBVSxFQUFFLE1BQU0sMEJBQTBCLENBQUM7QUFnUXREOzs7R0FHRztBQUNILE1BQU0sQ0FBQyxNQUFNLGlCQUFpQixHQUFHO0lBQy9CLEtBQUssRUFBRSxNQUFnQjtJQUN2QixPQUFPLEVBQUUsQ0FBQyxRQUFhLEVBQUUsRUFBRSxFQUFFLENBQUMsS0FBZ0I7SUFDOUMsWUFBWSxFQUFFLEVBQUU7SUFDaEIsWUFBWSxFQUFFLEVBQUU7Q0FDakIsQ0FBQztBQTBCRjs7Ozs7Ozs7R0FRRztBQUNILFNBQVMsTUFBTSxDQUFDLEdBQVE7SUFDdEIsSUFBSSxHQUFHLEtBQUssU0FBUztRQUNuQixPQUFPLFdBQVcsQ0FBQztJQUNyQixJQUFJLEdBQUcsS0FBSyxJQUFJO1FBQ2QsT0FBTyxNQUFNLENBQUM7SUFFaEIsTUFBTSxJQUFJLEdBQUcsT0FBTyxHQUFHLENBQUM7SUFDeEIsUUFBUSxJQUFJLEVBQUU7UUFDWixLQUFLLFNBQVMsQ0FBQztRQUNmLEtBQUssUUFBUSxDQUFDO1FBQ2QsS0FBSyxRQUFRLENBQUM7UUFDZCxLQUFLLFFBQVEsQ0FBQztRQUNkLEtBQUssVUFBVSxDQUFDLENBQUM7WUFDZixPQUFPLElBQUksQ0FBQztTQUNiO0tBQ0Y7SUFFRCxJQUFJLEtBQUssQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDO1FBQ3BCLE9BQU8sT0FBTyxDQUFDO0lBRWpCLElBQUksTUFBTSxDQUFDLEdBQUcsQ0FBQztRQUNiLE9BQU8sTUFBTSxDQUFDO0lBRWhCLElBQUksT0FBTyxDQUFDLEdBQUcsQ0FBQztRQUNkLE9BQU8sT0FBTyxDQUFDO0lBRWpCLElBQUksWUFBWSxDQUFDLEdBQUcsQ0FBQztRQUNuQixPQUFPLFlBQVksQ0FB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QUFDSCxTQUFTLFlBQVksQ0FBQyxHQUFRO0lBQzVCLGtFQUFrRTtJQUNsRSxxREFBcUQ7SUFDckQsT0FBTyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxZQUFZLFVBQVUsSUFBSSxDQUFDLE9BQU8sR0FBRyxDQUFDLElBQUksS0FBSyxVQUFVLElBQUksT0FBTyxHQUFHLENBQUMsU0FBUyxLQUFLLFVBQVUsQ0FBQyxDQUFDLENBQUM7QUFDekgsQ0FBQztBQUVEOztHQUVHO0FBQ0gsTUFBTSxDQUFDLE1BQU0sS0FBSyxHQUFHLElBQUksVUFBVSxDQUFRLENBQUMsVUFBVSxFQUFFLEVBQUU7SUFDeEQsVUFBVSxDQUFDLFFBQVEsRUFBRSxDQUFDO0FBQ3hCLENBQUMsQ0FBQyxDQUFDO0FBRUgsT0FBTyxFQUFFLFFBQVEsRUFBRSxPQUFPLEVBQUUsT0FBTyxFQUFFLFlBQVksRUFBRSxhQUFhLEVBQUUsU0FBUyxFQUFFLE1BQU0sRUFBRSxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgT2JzZXJ2YWJsZSB9IGZyb20gJ3J4anMvaW50ZXJuYWwvT2JzZXJ2YWJsZSc7XHJcbmltcG9ydCB7IEV4ZWN1dGlvblN0YWNrLCBTaW1wbGVMb2NrLCBTdG9yZSwgU3RvcmVTZXR0aW5ncyB9IGZyb20gJy4uL2xpYic7XHJcblxyXG4vKipcclxuICogSW50ZXJmYWNlIGRlZmluaW5nIHRoZSBzdHJ1Y3R1cmUgb2YgYW4gYWN0aW9uIG9iamVjdC5cclxuICpcclxuICogQWN0aW9ucyBhcmUgdGhlIHByaW1hcnkgd2F5IHRvIGNvbW11bmljYXRlIHN0YXRlIGNoYW5nZXMgaW4gQWN0aW9uc3RhY2stbGlrZSBzdG9yZXMuXHJcbiAqIFRoaXMgaW50ZXJmYWNlIGRlZmluZXMgdGhlIGV4cGVjdGVkIHByb3BlcnRpZXMgZm9yIGFuIGFjdGlvbi5cclxuICpcclxuICogQHR5cGVwYXJhbSBUIC0gT3B0aW9uYWwgdHlwZSBwYXJhbWV0ZXIgZm9yIHRoZSBhY3Rpb24gcGF5bG9hZC4gRGVmYXVsdHMgdG8gYGFueWAuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIEFjdGlvbjxUID0gYW55PiB7XHJcbiAgdHlwZTogc3RyaW5nO1xyXG4gIHBheWxvYWQ/OiBUO1xyXG4gIGVycm9yPzogYm9vbGVhbjtcclxuICBtZXRhPzogYW55O1xyXG4gIHNvdXJjZT86IGFueTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEludGVyZmFjZSBkZWZpbmluZyB0aGUgc3RydWN0dXJlIG9mIGFuIGFzeW5jaHJvbm91cyBhY3Rpb24uXHJcbiAqXHJcbiAqIEFzeW5jaHJvbm91cyBhY3Rpb25zIGFyZSBmdW5jdGlvbnMgdGhhdCByZXR1cm4gcHJvbWlzZXMsIGFsbG93aW5nIGZvclxyXG4gKiBoYW5kbGluZyBhc3luY2hyb25vdXMgb3BlcmF0aW9ucyBsaWtlIG5ldHdvcmsgcmVxdWVzdHMgb3IgdGltZXJzIHdpdGhpbiBhY3Rpb25zLlxyXG4gKlxyXG4gKiBAdHlwZXBhcmFtIFQgLSBPcHRpb25hbCB0eXBlIHBhcmFtZXRlciBmb3IgdGhlIGFjdGlvbiBwYXlsb2FkIHR5cGUgKHJlc29sdmVkIHByb21pc2UgdmFsdWUpLiBEZWZhdWx0cyB0byBgYW55YC5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgQXN5bmNBY3Rpb248VCA9IGFueT4ge1xyXG4gICguLi5hcmdzOiBhbnlbXSk6IFByb21pc2U8VD47XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBSZXByZXNlbnRzIGFuIGFjdGlvbiBjcmVhdG9yLlxyXG4gKiBAdGVtcGxhdGUgVCBUaGUgdHlwZSBvZiB0aGUgYWN0aW9uIHBheWxvYWQuXHJcbiAqL1xyXG5leHBvcnQgdHlwZSBBY3Rpb25DcmVhdG9yPFQgPSBhbnk+ID0gKCguLi5hcmdzOiBhbnlbXSkgPT4gQWN0aW9uPFQ+IHwgQXN5bmNBY3Rpb248VD4pICYge1xyXG4gIHRvU3RyaW5nKCk6IHN0cmluZztcclxuICB0eXBlOiBzdHJpbmc7XHJcbiAgbWF0Y2goYWN0aW9uOiBBY3Rpb248VD4pOiBib29sZWFuO1xyXG59XHJcblxyXG4vKipcclxuICogQSBmdW5jdGlvbiB0aGF0IHRha2VzIHRoZSBjdXJyZW50IHN0YXRlIGFuZCBhbiBhY3Rpb24sIGFuZCByZXR1cm5zXHJcbiAqIHRoZSB1cGRhdGVkIHN0YXRlIChleGNsdWRpbmcgcHJvbWlzZXMpLlxyXG4gKi9cclxuZXhwb3J0IHR5cGUgUmVkdWNlciA9IChzdGF0ZTogYW55LCBhY3Rpb246IEFjdGlvbikgPT4gRXhjbHVkZTxhbnksIFByb21pc2U8YW55Pj47XHJcblxyXG4vKipcclxuICogVHlwZSBhbGlhcyBmb3IgYW4gYXN5bmNocm9ub3VzIHJlZHVjZXIgZnVuY3Rpb24uXHJcbiAqXHJcbiAqIEFuIGFzeW5jaHJvbm91cyByZWR1Y2VyIGlzIGEgZnVuY3Rpb24gdGhhdCB0YWtlcyB0aGUgY3VycmVudCBzdGF0ZSBhbmQgYW4gYWN0aW9uIG9iamVjdCBhcyBhcmd1bWVudHMuXHJcbiAqIEl0IHJldHVybnMgYSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgdG8gdGhlIHVwZGF0ZWQgc3RhdGUgYWZ0ZXIgcG90ZW50aWFsbHkgcGVyZm9ybWluZyBhc3luY2hyb25vdXMgb3BlcmF0aW9ucy5cclxuICpcclxuICogQHBhcmFtIHN0YXRlIC0gVGhlIGN1cnJlbnQgc3RhdGUgb2YgdGhlIGFwcGxpY2F0aW9uLlxyXG4gKiBAcGFyYW0gYWN0aW9uIC0gVGhlIGFjdGlvbiBvYmplY3QgYmVpbmcgZGlzcGF0Y2hlZC5cclxuICogQHJldHVybnMgUHJvbWlzZTxhbnk+IC0gQSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgdG8gdGhlIHVwZGF0ZWQgc3RhdGUgYWZ0ZXIgYXN5bmNocm9ub3VzIG9wZXJhdGlvbnMgKGlmIGFueSkuXHJcbiAqL1xyXG5leHBvcnQgdHlwZSBBc3luY1JlZHVjZXI8VCA9IGFueT4gPSAoc3RhdGU6IFQsIGFjdGlvbjogQWN0aW9uKSA9PiBQcm9taXNlPFQ+O1xyXG5cclxuLyoqXHJcbiAqIFR5cGUgYWxpYXMgZm9yIGEgbWV0YS1yZWR1Y2VyIGZ1bmN0aW9uLlxyXG4gKlxyXG4gKiBBIG1ldGEtcmVkdWNlciBpcyBhIGhpZ2hlci1vcmRlciBmdW5jdGlvbiB0aGF0IHRha2VzIGFuIGFzeW5jaHJvbm91cyByZWR1Y2VyIGFzIGFuIGFyZ3VtZW50LlxyXG4gKiBJdCByZXR1cm5zIGEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHRvIGEgcG90ZW50aWFsbHkgbW9kaWZpZWQgYXN5bmNocm9ub3VzIHJlZHVjZXIuXHJcbiAqIE1ldGEtcmVkdWNlcnMgYXJlIHVzZWQgdG8gYXBwbHkgYWRkaXRpb25hbCBsb2dpYyBvciBtaWRkbGV3YXJlIGZ1bmN0aW9uYWxpdHkgYXJvdW5kIHJlZHVjZXJzLlxyXG4gKlxyXG4gKiBAcGFyYW0gcmVkdWNlciAtIFRoZSBhc3luY2hyb25vdXMgcmVkdWNlciBmdW5jdGlvbiB0byBiZSB3cmFwcGVkIG9yIG1vZGlmaWVkLlxyXG4gKiBAcmV0dXJucyBQcm9taXNlPEFzeW5jUmVkdWNlcj4gLSBBIHByb21pc2UgdGhhdCByZXNvbHZlcyB0byBhIHBvdGVudGlhbGx5IG1vZGlmaWVkIGFzeW5jaHJvbm91cyByZWR1Y2VyLlxyXG4gKi9cclxuZXhwb3J0IHR5cGUgTWV0YVJlZHVjZXIgPSAocmVkdWNlcjogQXN5bmNSZWR1Y2VyKSA9PiBQcm9taXNlPEFzeW5jUmVkdWNlcj47XHJcblxyXG4vKipcclxuICogRGVmaW5lcyB0aGUgbWV0aG9kcyBhbmQgcHJvcGVydGllcyBhdmFpbGFibGUgdG8gbWlkZGxld2FyZSBmb3IgaW50ZXJhY3Rpbmcgd2l0aCB0aGUgc3RvcmUuXHJcbiAqIFByb3ZpZGVzIGFjY2VzcyB0byBzdGF0ZSwgZGlzcGF0Y2hpbmcgYWN0aW9ucywgZGVwZW5kZW5jaWVzLCBwcm9jZXNzaW5nIHN0cmF0ZWd5LFxyXG4gKiBzeW5jaHJvbml6YXRpb24sIGFuZCBleGVjdXRpb24gc3RhY2suXHJcbiAqXHJcbiAqIEBwcm9wZXJ0eSB7ZnVuY3Rpb24oW3N0cmluZ1tdXSk6IGFueX0gZ2V0U3RhdGUgLSBSZXRyaWV2ZXMgdGhlIHN0YXRlIG9yIGEgc3BlY2lmaWMgc2xpY2Ugb2YgdGhlIHN0YXRlLlxyXG4gKiBAcHJvcGVydHkge2Z1bmN0aW9uKEFjdGlvbnxBc3luY0FjdGlvbik6IFByb21pc2U8dm9pZD59IGRpc3BhdGNoIC0gRGlzcGF0Y2hlcyBhbiBhY3Rpb24gKHN5bmNocm9ub3VzIG9yIGFzeW5jaHJvbm91cykuXHJcbiAqIEBwcm9wZXJ0eSB7ZnVuY3Rpb24oKTogYW55fSBkZXBlbmRlbmNpZXMgLSBSZXRyaWV2ZXMgdGhlIGN1cnJlbnQgZGVwZW5kZW5jaWVzIGluIHRoZSBwaXBlbGluZS5cclxuICogQHByb3BlcnR5IHtmdW5jdGlvbigpOiBQcm9jZXNzaW5nU3RyYXRlZ3l9IHN0cmF0ZWd5IC0gUmV0cmlldmVzIHRoZSBjdXJyZW50IHByb2Nlc3Npbmcgc3RyYXRlZ3kuXHJcbiAqIEBwcm9wZXJ0eSB7U2ltcGxlTG9ja30gbG9jayAtIEEgbG9jayB0byBzeW5jaHJvbml6ZSBvciBwcmV2ZW50IGNvbmN1cnJlbnQgYWNjZXNzIHRvIHJlc291cmNlcy5cclxuICogQHByb3BlcnR5IHtFeGVjdXRpb25TdGFja30gc3RhY2sgLSBUaGUgZXhlY3V0aW9uIHN0YWNrIHRyYWNraW5nIHRoZSBzZXF1ZW5jZSBvZiBhY3Rpb25zIG9yIG9wZXJhdGlvbnMuXHJcbiAqL1xyXG5leHBvcnQgdHlwZSBNaWRkbGV3YXJlQVBJID0ge1xyXG4gIGdldFN0YXRlOiAoc2xpY2U/OiBzdHJpbmdbXSkgPT4gYW55O1xyXG4gIGRpc3BhdGNoOiAoYWN0aW9uOiBBY3Rpb24gfCBBc3luY0FjdGlvbikgPT4gUHJvbWlzZTx2b2lkPjtcclxuICBkZXBlbmRlbmNpZXM6ICgpID0+IGFueTtcclxuICBzdHJhdGVneTogKCkgPT4gUHJvY2Vzc2luZ1N0cmF0ZWd5O1xyXG4gIGxvY2s6IFNpbXBsZUxvY2s7XHJcbiAgc3RhY2s6IEV4ZWN1dGlvblN0YWNrO1xyXG59XHJcblxyXG4vKipcclxuICogSW50ZXJmYWNlIGRlZmluaW5nIHRoZSBzdHJ1Y3R1cmUgb2YgYSBtaWRkbGV3YXJlIGZ1bmN0aW9uLlxyXG4gKlxyXG4gKiBNaWRkbGV3YXJlIGZ1bmN0aW9ucyBhcmUgdXNlZCB0byBpbnRlcmNlcHQsIGhhbmRsZSwgYW5kIHBvdGVudGlhbGx5IG1vZGlmeSB0aGUgZGlzcGF0Y2hpbmcgcHJvY2VzcyBpbiBBY3Rpb25zdGFjay1saWtlIHN0b3Jlcy5cclxuICogVGhpcyBpbnRlcmZhY2UgZGVmaW5lcyB0aGUgZXhwZWN0ZWQgYmVoYXZpb3IgZm9yIGEgbWlkZGxld2FyZSBmdW5jdGlvbi5cclxuICpcclxuICogQHByb3BlcnR5IChhcGk6IFN0b3JlKSA9PiAobmV4dDogRnVuY3Rpb24pID0+IChhY3Rpb246IGFueSkgPT4gUHJvbWlzZTxhbnk+IHwgYW55XHJcbiAqICAtIEEgZnVuY3Rpb24gdGhhdCB0YWtlcyB0aGUgc3RvcmUgaW5zdGFuY2UgYXMgYW4gYXJndW1lbnQuXHJcbiAqICAtIEl0IHJldHVybnMgYW5vdGhlciBmdW5jdGlvbiB0aGF0IHRha2VzIHRoZSBgbmV4dGAgZnVuY3Rpb24gaW4gdGhlIG1pZGRsZXdhcmUgY2hhaW4gYXMgYW4gYXJndW1lbnQuXHJcbiAqICAtIFRoZSBpbm5lciBmdW5jdGlvbiBjYW4gcGVyZm9ybSBsb2dpYyBiZWZvcmUgYW5kL29yIGFmdGVyIGNhbGxpbmcgdGhlIGBuZXh0YCBmdW5jdGlvbiB3aXRoIHRoZSBhY3Rpb24uXHJcbiAqICAtIEl0IGNhbiBvcHRpb25hbGx5IHJldHVybiBhIHByb21pc2UgdGhhdCByZXNvbHZlcyB0byBhIG1vZGlmaWVkIHZlcnNpb24gb2YgdGhlIGBuZXh0YCBmdW5jdGlvbixcclxuICogICAgICBhbGxvd2luZyBmb3IgYXN5bmNocm9ub3VzIG1pZGRsZXdhcmUgYmVoYXZpb3IuXHJcbiAqICAtIEFsdGVybmF0aXZlbHksIGl0IGNhbiByZXR1cm4gYW55IHZhbHVlIHRvIHBvdGVudGlhbGx5IHNob3J0LWNpcmN1aXQgdGhlIG1pZGRsZXdhcmUgY2hhaW4uXHJcbiAqXHJcbiAqIEBwcm9wZXJ0eSBzaWduYXR1cmU/OiBzdHJpbmcgKG9wdGlvbmFsKVxyXG4gKiAgLSBBbiBvcHRpb25hbCBzdHJpbmcgcHJvcGVydHkgdGhhdCBjYW4gYmUgdXNlZCB0byBkZWZpbmUgYSBzaWduYXR1cmUgZm9yIHRoZSBtaWRkbGV3YXJlLFxyXG4gKiAgICAgIGFpZGluZyBpbiB0eXBlIGNoZWNraW5nIGFuZCBkb2N1bWVudGF0aW9uLlxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBNaWRkbGV3YXJlIHtcclxuICAoYXBpOiBhbnkpOiAobmV4dDogRnVuY3Rpb24pID0+IChhY3Rpb246IEFjdGlvbikgPT4gUHJvbWlzZTxhbnk+IHwgYW55O1xyXG4gIHNpZ25hdHVyZT86IHN0cmluZztcclxufVxyXG5cclxuLyoqXHJcbiAqIFJlcHJlc2VudHMgYW4gb2JzZXJ2ZXIgdGhhdCByZWNlaXZlcyBub3RpZmljYXRpb25zIG9mIHZhbHVlcyBmcm9tIGFuIE9ic2VydmFibGUuXHJcbiAqIEBpbnRlcmZhY2VcclxuICogQHRlbXBsYXRlIFQgVGhlIHR5cGUgb2YgdGhlIHZhbHVlIGJlaW5nIG9ic2VydmVkLlxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBPYnNlcnZlcjxUPiB7XHJcbiAgbmV4dDogKHZhbHVlOiBUKSA9PiB2b2lkO1xyXG4gIGVycm9yOiAoZXJyOiBhbnkpID0+IHZvaWQ7XHJcbiAgY29tcGxldGU6ICgpID0+IHZvaWQ7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBSZXByZXNlbnRzIGFuIGFzeW5jaHJvbm91cyBvYnNlcnZlciB0aGF0IHJlY2VpdmVzIG5vdGlmaWNhdGlvbnMgb2YgdmFsdWVzIGZyb20gYW4gT2JzZXJ2YWJsZS5cclxuICogQGludGVyZmFjZVxyXG4gKiBAdGVtcGxhdGUgVCBUaGUgdHlwZSBvZiB0aGUgdmFsdWUgYmVpbmcgb2JzZXJ2ZWQuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIEFzeW5jT2JzZXJ2ZXI8VD4ge1xyXG4gIG5leHQ6ICh2YWx1ZTogVCkgPT4gUHJvbWlzZTx2b2lkPjtcclxuICBlcnJvcjogKGVycjogYW55KSA9PiBQcm9taXNlPHZvaWQ+O1xyXG4gIGNvbXBsZXRlOiAoKSA9PiBQcm9taXNlPHZvaWQ+O1xyXG59XHJcblxyXG4vKipcclxuICogSW50ZXJmYWNlIHJlcHJlc2VudGluZyBhbiBvcGVyYXRvciBmdW5jdGlvbiBmb3IgdHJhbnNmb3JtaW5nIG9ic2VydmFibGVzLlxyXG4gKlxyXG4gKiBBbiBvcGVyYXRvciBmdW5jdGlvbiB0YWtlcyBhbiBpbnB1dCBgT2JzZXJ2YWJsZTxUPmAgYW5kIHJldHVybnMgYW4gb3V0cHV0IGBPYnNlcnZhYmxlPFI+YC5cclxuICpcclxuICogQHR5cGVQYXJhbSBUIC0gVGhlIHR5cGUgb2YgdGhlIGlucHV0IGVsZW1lbnRzLlxyXG4gKiBAdHlwZVBhcmFtIFIgLSBUaGUgdHlwZSBvZiB0aGUgb3V0cHV0IGVsZW1lbnRzLlxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBPcGVyYXRvckZ1bmN0aW9uPFQsIFI+IHtcclxuICAoc291cmNlOiBPYnNlcnZhYmxlPFQ+KTogT2JzZXJ2YWJsZTxSPlxyXG59XHJcblxyXG4vKipcclxuICogVHlwZSBhbGlhcyBmb3IgYW55IGZ1bmN0aW9uIHRoYXQgdGFrZXMgYW55IG51bWJlciBvZiBhcmd1bWVudHMgYW5kIHJldHVybnMgYW55dGhpbmcuXHJcbiAqXHJcbiAqIFRoaXMgdHlwZSBpcyB1c2VkIHRvIHJlcHJlc2VudCBhIGdlbmVyaWMgZnVuY3Rpb24gd2l0aG91dCBzcGVjaWZ5aW5nIGEgc3BlY2lmaWMgYXJndW1lbnQgb3IgcmV0dXJuIHR5cGUuXHJcbiAqIEl0IGNhbiBiZSBoZWxwZnVsIGZvciBzaXR1YXRpb25zIHdoZXJlIHRoZSBleGFjdCBmdW5jdGlvbiBzaWduYXR1cmUgaXMgbm90IGltcG9ydGFudC5cclxuICovXHJcbmV4cG9ydCB0eXBlIEFueUZuID0gKC4uLmFyZ3M6IGFueVtdKSA9PiBhbnk7XHJcblxyXG4vKipcclxuICogSW50ZXJmYWNlIGRlZmluaW5nIHRoZSBzdHJ1Y3R1cmUgb2YgYSBzZWxlY3RvciBmdW5jdGlvbi5cclxuICpcclxuICogU2VsZWN0b3JzIGFyZSBmdW5jdGlvbnMgdGhhdCBleHRyYWN0IHNwZWNpZmljIGRhdGEgb3IgZGVyaXZlZCB2YWx1ZXMgZnJvbSB0aGUgQWN0aW9uc3RhY2sgc3RvcmUncyBzdGF0ZS5cclxuICogVGhpcyBpbnRlcmZhY2UgZGVmaW5lcyB0aGUgZXhwZWN0ZWQgYmVoYXZpb3IgZm9yIGEgc2VsZWN0b3IgZnVuY3Rpb24uXHJcbiAqXHJcbiAqIEBwYXJhbSBzdGF0ZSAtIFRoZSBjdXJyZW50IHN0YXRlIG9mIHRoZSBhcHBsaWNhdGlvbi5cclxuICogQHBhcmFtIHByb3BzPzogYW55IChvcHRpb25hbCkgLSBPcHRpb25hbCBwcm9wcyBvYmplY3QgdGhhdCBjYW4gYmUgdXNlZCBieSB0aGUgc2VsZWN0b3IgZm9yIGFkZGl0aW9uYWwgbG9naWMuXHJcbiAqIEByZXR1cm5zIGFueSAtIFRoZSBzZWxlY3RlZCB2YWx1ZSBvciBkZXJpdmVkIGRhdGEgZnJvbSB0aGUgc3RhdGUuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIFNlbGVjdG9yRnVuY3Rpb24ge1xyXG4gIChzdGF0ZTogYW55LCBwcm9wcz86IGFueSk6IGFueTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEludGVyZmFjZSBkZWZpbmluZyB0aGUgc3RydWN0dXJlIG9mIGEgcHJvamVjdGlvbiBmdW5jdGlvbi5cclxuICpcclxuICogUHJvamVjdGlvbiBmdW5jdGlvbnMgYXJlIHNpbWlsYXIgdG8gc2VsZWN0b3IgZnVuY3Rpb25zLCBidXQgdGhleSBjYW4gaGFuZGxlIHByb2plY3RpbmcgZGF0YSBmcm9tXHJcbiAqIGVpdGhlciBhIHNpbmdsZSBzdGF0ZSBvYmplY3Qgb3IgYW4gYXJyYXkgb2Ygc3RhdGUgb2JqZWN0cy5cclxuICogVGhpcyBpbnRlcmZhY2UgZGVmaW5lcyB0aGUgZXhwZWN0ZWQgYmVoYXZpb3IgZm9yIGEgcHJvamVjdGlvbiBmdW5jdGlvbi5cclxuICpcclxuICogQHBhcmFtIHN0YXRlIC0gVGhlIGN1cnJlbnQgc3RhdGUgb2YgdGhlIGFwcGxpY2F0aW9uIChjYW4gYmUgYSBzaW5nbGUgb2JqZWN0IG9yIGFuIGFycmF5IG9mIHN0YXRlIG9iamVjdHMpLlxyXG4gKiBAcGFyYW0gcHJvcHM/OiBhbnkgKG9wdGlvbmFsKSAtIE9wdGlvbmFsIHByb3BzIG9iamVjdCB0aGF0IGNhbiBiZSB1c2VkIGJ5IHRoZSBwcm9qZWN0aW9uIGZ1bmN0aW9uIGZvciBhZGRpdGlvbmFsIGxvZ2ljLlxyXG4gKiBAcmV0dXJucyBhbnkgLSBUaGUgcHJvamVjdGVkIHZhbHVlIG9yIGRlcml2ZWQgZGF0YSBmcm9tIHRoZSBzdGF0ZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgUHJvamVjdGlvbkZ1bmN0aW9uIHtcclxuICAoc3RhdGU6IGFueSB8IGFueVtdLCBwcm9wcz86IGFueSk6IGFueTtcclxufVxyXG5cclxuLyoqXHJcbiAqIFR5cGUgYWxpYXMgcmVwcmVzZW50aW5nIGEgcmVjdXJzaXZlIHRyZWUgc3RydWN0dXJlLlxyXG4gKlxyXG4gKiBUaGlzIHR5cGUgaXMgdXNlZCB0byBkZWZpbmUgbmVzdGVkIG9iamVjdHMgaW4gYSBoaWVyYXJjaGljYWwgd2F5LlxyXG4gKiAtIGBMZWFmVHlwZWA6IFRoZSB0eXBlIGZvciB0aGUgbGVhZiBub2RlcyBvZiB0aGUgdHJlZSAocmVwcmVzZW50aW5nIHRoZSBiYXNlIHZhbHVlcykuXHJcbiAqIC0gYFRgOiBPcHRpb25hbCB0eXBlIHBhcmFtZXRlciBmb3IgdGhlIHJvb3Qgb2JqZWN0IHR5cGUgKGRlZmF1bHRzIHRvIGBhbnlgKS5cclxuICpcclxuICogVGhlIHN0cnVjdHVyZSB3b3JrcyBhcyBmb2xsb3dzOlxyXG4gKiAgLSBGb3IgZWFjaCBwcm9wZXJ0eSBrZXkgYEtgIGluIHRoZSByb290IG9iamVjdCB0eXBlIGBUYDpcclxuICogICAgICAtIElmIHRoZSBwcm9wZXJ0eSB2YWx1ZSBgVFtLXWAgaXMgYW4gb2JqZWN0OlxyXG4gKiAgICAgICAgICAtIFRoZSB0eXBlIGZvciB0aGF0IHByb3BlcnR5IGJlY29tZXMgYW5vdGhlciBgVHJlZWAgaW5zdGFuY2UsIHJlY3Vyc2l2ZWx5IGRlZmluaW5nIHRoZSBuZXN0ZWQgc3RydWN0dXJlLlxyXG4gKiAgICAgIC0gSWYgdGhlIHByb3BlcnR5IHZhbHVlIGBUW0tdYCBpcyBub3QgYW4gb2JqZWN0OlxyXG4gKiAgICAgICAgICAtIFRoZSB0eXBlIGZvciB0aGF0IHByb3BlcnR5IGJlY29tZXMgdGhlIGBMZWFmVHlwZWAuXHJcbiAqXHJcbiAqIFRoaXMgdHlwZSBhbGxvd3MgZm9yIHJlcHJlc2VudGluZyBjb21wbGV4IG9iamVjdCBzdHJ1Y3R1cmVzIHdpdGggbmVzdGVkIG9iamVjdHMgYW5kIGxlYWYgbm9kZXMuXHJcbiAqL1xyXG5leHBvcnQgdHlwZSBUcmVlPExlYWZUeXBlLCBUID0gYW55PiA9IHtcclxuICBbSyBpbiBrZXlvZiBUXTogVFtLXSBleHRlbmRzIG9iamVjdCA/IFRyZWU8TGVhZlR5cGUsIFRbS10+IDogTGVhZlR5cGU7XHJcbn07XHJcblxyXG4vKipcclxuICogVHlwZSBhbGlhcyByZXByZXNlbnRpbmcgcHJvY2Vzc2luZyBzdHJhdGVnaWVzIGZvciBzaWRlIGVmZmVjdHMuXHJcbiAqXHJcbiAqL1xyXG5leHBvcnQgdHlwZSBQcm9jZXNzaW5nU3RyYXRlZ3kgPSBcImV4Y2x1c2l2ZVwiIHwgXCJjb25jdXJyZW50XCI7XHJcblxyXG4vKipcclxuICogVHlwZSBhbGlhcyByZXByZXNlbnRpbmcgc2xpY2Ugc3RyYXRlZ2llcy5cclxuICpcclxuICovXHJcbmV4cG9ydCB0eXBlIFNsaWNlU3RyYXRlZ3kgPSBcInBlcnNpc3RlbnRcIiB8IFwidGVtcG9yYXJ5XCI7XHJcblxyXG4vKipcclxuICogSW50ZXJmYWNlIGRlZmluaW5nIHRoZSBzdHJ1Y3R1cmUgb2YgYSBmZWF0dXJlIG1vZHVsZS5cclxuICpcclxuICogRmVhdHVyZSBtb2R1bGVzIGFyZSB1c2VkIHRvIG9yZ2FuaXplIHN0YXRlIGFuZCBsb2dpYyBmb3Igc3BlY2lmaWMgcGFydHMgb2YgYW4gYXBwbGljYXRpb24uXHJcbiAqIFRoaXMgaW50ZXJmYWNlIGRlZmluZXMgdGhlIGV4cGVjdGVkIHByb3BlcnRpZXMgZm9yIGEgZmVhdHVyZSBtb2R1bGUuXHJcbiAqXHJcbiAqIEBwcm9wZXJ0eSBzbGljZSAtIEEgdW5pcXVlIHN0cmluZyBpZGVudGlmaWVyIGZvciB0aGUgZmVhdHVyZSBtb2R1bGUncyBzdGF0ZSBzbGljZSBpbiB0aGUgc3RvcmUuXHJcbiAqIEBwcm9wZXJ0eSByZWR1Y2VyIC0gVGhlIHJlZHVjZXIgZnVuY3Rpb24gb3IgYSB0cmVlIG9mIHJlZHVjZXJzIHJlc3BvbnNpYmxlIGZvciBtYW5hZ2luZyB0aGUgc3RhdGUgb2YgdGhlIGZlYXR1cmUuXHJcbiAqICAgICAgICAgICAgICAgICAgLSBBIHJlZHVjZXIgZnVuY3Rpb24gdGFrZXMgdGhlIGN1cnJlbnQgc3RhdGUgc2xpY2UgYW5kIGFuIGFjdGlvbiBvYmplY3QsXHJcbiAqICAgICAgICAgICAgICAgICAgICBhbmQgcmV0dXJucyB0aGUgdXBkYXRlZCBzdGF0ZSBzbGljZSBiYXNlZCBvbiB0aGUgYWN0aW9uLlxyXG4gKiAgICAgICAgICAgICAgICAgIC0gQSB0cmVlIG9mIHJlZHVjZXJzIGFsbG93cyBmb3IgZGVmaW5pbmcgbmVzdGVkIHJlZHVjZXJzIGZvciBjb21wbGV4IHN0YXRlIHN0cnVjdHVyZXMuXHJcbiAqIEBwcm9wZXJ0eSBkZXBlbmRlbmNpZXM/OiBUcmVlPGFueT4gKG9wdGlvbmFsKSAtXHJcbiAqICAgICAgICAgICAgICAgICAgIEFuIG9wdGlvbmFsIHRyZWUgcmVwcmVzZW50aW5nIHRoZSBkZXBlbmRlbmNpZXMgcmVxdWlyZWQgYnkgdGhlIGZlYXR1cmUgbW9kdWxlLlxyXG4gKiAgICAgICAgICAgICAgICAgICAtIFRoZXNlIGRlcGVuZGVuY2llcyBjYW4gYmUgdHlwZXMgKGxpa2UgY2xhc3NlcyBvciBpbnRlcmZhY2VzKSBvciBpbmplY3Rpb24gdG9rZW5zXHJcbiAqICAgICAgICAgICAgICAgICAgICAgdXNlZCBmb3IgZGVwZW5kZW5jeSBpbmplY3Rpb24uXHJcbiAqICAgICAgICAgICAgICAgICAgIC0gVGhlIHRyZWUgc3RydWN0dXJlIGFsbG93cyBmb3Igc3BlY2lmeWluZyBuZXN0ZWQgZGVwZW5kZW5jaWVzIHdpdGhpbiB0aGUgZmVhdHVyZS5cclxuICovXHJcbmV4cG9ydCB0eXBlIEZlYXR1cmVNb2R1bGUgPSB7XHJcbiAgc2xpY2U6IHN0cmluZztcclxuICByZWR1Y2VyOiBSZWR1Y2VyIHwgQXN5bmNSZWR1Y2VyIHwgVHJlZTxSZWR1Y2VyIHwgQXN5bmNSZWR1Y2VyPjtcclxuICBkZXBlbmRlbmNpZXM/OiBUcmVlPGFueT47XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBJbnRlcmZhY2UgZGVmaW5pbmcgdGhlIHN0cnVjdHVyZSBvZiB0aGUgbWFpbiBhcHBsaWNhdGlvbiBtb2R1bGUuXHJcbiAqXHJcbiAqIFRoZSBtYWluIGFwcGxpY2F0aW9uIG1vZHVsZSBzZXJ2ZXMgYXMgdGhlIGVudHJ5IHBvaW50IGZvciBjb25maWd1cmluZyB0aGUgQWN0aW9uc3RhY2sgc3RvcmUuXHJcbiAqIFRoaXMgaW50ZXJmYWNlIGRlZmluZXMgdGhlIGV4cGVjdGVkIHByb3BlcnRpZXMgZm9yIHRoZSBtYWluIGFwcGxpY2F0aW9uIG1vZHVsZS5cclxuICpcclxuICogQHByb3BlcnR5IG1ldGFSZWR1Y2Vycz86IE1ldGFSZWR1Y2VyW10gKG9wdGlvbmFsKSAtIEFuIGFycmF5IG9mIG1ldGEtcmVkdWNlciBmdW5jdGlvbnMgdG8gYmUgYXBwbGllZCB0byB0aGUgcmVkdWNlcnMuXHJcbiAqICAgICAgICAgICAgICAgICAgLSBNZXRhLXJlZHVjZXJzIGFyZSBoaWdoZXItb3JkZXIgZnVuY3Rpb25zIHRoYXQgY2FuIHdyYXAgYW5kIHBvdGVudGlhbGx5IG1vZGlmeSByZWR1Y2VycyxcclxuICogICAgICAgICAgICAgICAgICAgIGFkZGluZyBhZGRpdGlvbmFsIGxvZ2ljIG9yIG1pZGRsZXdhcmUgZnVuY3Rpb25hbGl0eS5cclxuICovXHJcbmV4cG9ydCB0eXBlIE1haW5Nb2R1bGUgPSAgT21pdDxGZWF0dXJlTW9kdWxlLCBcInNsaWNlXCI+ICYge1xyXG4gIHNsaWNlPzogXCJtYWluXCI7XHJcbiAgbWV0YVJlZHVjZXJzPzogTWV0YVJlZHVjZXJbXTtcclxufVxyXG5cclxuLyoqXHJcbiAqIERlZmF1bHQgY29uZmlndXJhdGlvbiBmb3IgdGhlIG1haW4gbW9kdWxlLlxyXG4gKiBJbmNsdWRlcyBhIHNsaWNlIG5hbWUsIGEgYmFzaWMgcmVkdWNlciwgYW4gZW1wdHkgbGlzdCBvZiBtZXRhUmVkdWNlcnMsIGFuZCBubyBkZXBlbmRlbmNpZXMuXHJcbiAqL1xyXG5leHBvcnQgY29uc3QgZGVmYXVsdE1haW5Nb2R1bGUgPSB7XHJcbiAgc2xpY2U6IFwibWFpblwiIGFzIFwibWFpblwiLFxyXG4gIHJlZHVjZXI6IChzdGF0ZTogYW55ID0ge30pID0+IHN0YXRlIGFzIFJlZHVjZXIsXHJcbiAgbWV0YVJlZHVjZXJzOiBbXSxcclxuICBkZXBlbmRlbmNpZXM6IHt9XHJcbn07XHJcblxyXG4vKipcclxuICogVHlwZSBkZWZpbml0aW9uIGZvciBhIGZ1bmN0aW9uIHRoYXQgY3JlYXRlcyBhIHN0b3JlIGluc3RhbmNlLlxyXG4gKlxyXG4gKiBAdGVtcGxhdGUgVCAtIFRoZSB0eXBlIG9mIHRoZSBzdGF0ZSBtYW5hZ2VkIGJ5IHRoZSBzdG9yZS5cclxuICogQHBhcmFtIHtNYWluTW9kdWxlfSBtb2R1bGUgLSBUaGUgbWFpbiBtb2R1bGUgY29uZmlndXJhdGlvbiwgZGVmaW5pbmcgdGhlIGluaXRpYWwgc3RhdGUsIHJlZHVjZXJzLCBtaWRkbGV3YXJlLCBhbmQgb3RoZXIgc3RvcmUgcHJvcGVydGllcy5cclxuICogQHBhcmFtIHtTdG9yZVNldHRpbmdzfSBbc2V0dGluZ3NdIC0gT3B0aW9uYWwgc2V0dGluZ3MgZm9yIHRoZSBzdG9yZSwgc3VjaCBhcyBkaXNwYXRjaCBiZWhhdmlvciBvciBmZWF0dXJlIHRvZ2dsZXMuXHJcbiAqIEBwYXJhbSB7U3RvcmVFbmhhbmNlcn0gW2VuaGFuY2VyXSAtIE9wdGlvbmFsIGVuaGFuY2VyIGZ1bmN0aW9uIHRvIGV4dGVuZCBvciBtb2RpZnkgdGhlIHN0b3JlJ3MgZnVuY3Rpb25hbGl0eS5cclxuICogQHJldHVybnMge1N0b3JlPFQ+fSBUaGUgY3JlYXRlZCBzdG9yZSBpbnN0YW5jZSB3aXRoIG1ldGhvZHMgZm9yIG1hbmFnaW5nIHN0YXRlIGFuZCBhY3Rpb25zLlxyXG4gKi9cclxuZXhwb3J0IHR5cGUgU3RvcmVDcmVhdG9yPFQgPSBhbnk+ID0gKG1vZHVsZTogTWFpbk1vZHVsZSwgc2V0dGluZ3M/OiBTdG9yZVNldHRpbmdzLCBlbmhhbmNlcj86IFN0b3JlRW5oYW5jZXIpID0+IFN0b3JlPFQ+O1xyXG5cclxuLyoqXHJcbiAqIFR5cGUgYWxpYXMgZm9yIGEgc3RvcmUgZW5oYW5jZXIgZnVuY3Rpb24uXHJcbiAqXHJcbiAqIFRoaXMgdHlwZSByZXByZXNlbnRzIGEgZnVuY3Rpb24gdGhhdCB0YWtlcyB0aGUgbmV4dCBzdG9yZSBjcmVhdGlvbiBmdW5jdGlvbiBhcyBhbiBhcmd1bWVudCxcclxuICogYW5kIHJldHVybnMgYSBuZXcgc3RvcmUgY3JlYXRpb24gZnVuY3Rpb24gcG90ZW50aWFsbHkgd2l0aCBhZGRpdGlvbmFsIGZ1bmN0aW9uYWxpdHkuXHJcbiAqIFN0b3JlIGVuaGFuY2VycyBhcmUgdXNlZCB0byBleHRlbmQgdGhlIGNhcGFiaWxpdGllcyBvZiB0aGUgc3RvcmUgY3JlYXRpb24gcHJvY2Vzcy5cclxuICpcclxuICogQHBhcmFtIG5leHQgLSBUaGUgbmV4dCBzdG9yZSBjcmVhdGlvbiBmdW5jdGlvbiBpbiB0aGUgY2hhaW4gKHR5cGljYWxseSB0aGUgZGVmYXVsdCBzdG9yZSBjcmVhdG9yKS5cclxuICogQHJldHVybnMgU3RvcmVDcmVhdG9yIC0gQSBuZXcgc3RvcmUgY3JlYXRpb24gZnVuY3Rpb24gdGhhdCBwb3RlbnRpYWxseSB3cmFwcyB0aGUgb3JpZ2luYWwgb25lXHJcbiAqICAgICAgICAgICAgICAgICAgICAgICAgIGFuZCBwcm92aWRlcyBhZGRpdGlvbmFsIGZ1bmN0aW9uYWxpdHkuXHJcbiAqL1xyXG5leHBvcnQgdHlwZSBTdG9yZUVuaGFuY2VyID0gKG5leHQ6IFN0b3JlQ3JlYXRvcikgPT4gU3RvcmVDcmVhdG9yO1xyXG5cclxuLyoqXHJcbiAqIERldGVybWluZXMgdGhlIHR5cGUgb2YgYSBnaXZlbiB2YWx1ZS5cclxuICpcclxuICogVGhpcyBmdW5jdGlvbiBhdHRlbXB0cyB0byBpZGVudGlmeSB0aGUgdW5kZXJseWluZyB0eXBlIG9mIGEgSmF2YVNjcmlwdCB2YWx1ZVxyXG4gKiB1c2luZyBhIGNvbWJpbmF0aW9uIG9mIGNoZWNrcyBhbmQgYnVpbHQtaW4gZnVuY3Rpb25zLlxyXG4gKlxyXG4gKiBAcGFyYW0gdmFsIC0gVGhlIHZhbHVlIHRvIGRldGVybWluZSB0aGUgdHlwZSBmb3IuXHJcbiAqIEByZXR1cm5zIHN0cmluZyAtIEEgc3RyaW5nIHJlcHJlc2VudGluZyB0aGUgdHlwZSBvZiB0aGUgdmFsdWUgKGUuZy4sIFwidW5kZWZpbmVkXCIsIFwic3RyaW5nXCIsIFwiYXJyYXlcIiwgZXRjLikuXHJcbiAqL1xyXG5mdW5jdGlvbiBraW5kT2YodmFsOiBhbnkpOiBzdHJpbmcge1xyXG4gIGlmICh2YWwgPT09IHVuZGVmaW5lZClcclxuICAgIHJldHVybiBcInVuZGVmaW5lZFwiO1xyXG4gIGlmICh2YWwgPT09IG51bGwpXHJcbiAgICByZXR1cm4gXCJudWxsXCI7XHJcblxyXG4gIGNvbnN0IHR5cGUgPSB0eXBlb2YgdmFsO1xyXG4gIHN3aXRjaCAodHlwZSkge1xyXG4gICAgY2FzZSBcImJvb2xlYW5cIjpcclxuICAgIGNhc2UgXCJzdHJpbmdcIjpcclxuICAgIGNhc2UgXCJudW1iZXJcIjpcclxuICAgIGNhc2UgXCJzeW1ib2xcIjpcclxuICAgIGNhc2UgXCJmdW5jdGlvblwiOiB7XHJcbiAgICAgIHJldHVybiB0eXBlO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgaWYgKEFycmF5LmlzQXJyYXkodmFsKSlcclxuICAgIHJldHVybiBcImFycmF5XCI7XHJcblxyXG4gIGlmIChpc0RhdGUodmFsKSlcclxuICAgIHJldHVybiBcImRhdGVcIjtcclxuXHJcbiAgaWYgKGlzRXJyb3IodmFsKSlcclxuICAgIHJldHVybiBcImVycm9yXCI7XHJcblxyXG4gIGlmIChpc09ic2VydmFibGUodmFsKSlcclxuICAgIHJldHVybiBcIm9ic2VydmFibGVcIjtcclxuXHJcbiAgaWYgKGlzUHJvbWlzZSh2YWwpKVxyXG4gICAgcmV0dXJuIFwicHJvbWlzZVwiO1xyXG5cclxuICBjb25zdCBjb25zdHJ1Y3Rvck5hbWUgPSBjdG9yTmFtZSh2YWwpO1xyXG4gIHN3aXRjaCAoY29uc3RydWN0b3JOYW1lKSB7XHJcbiAgICBjYXNlIFwiU3ltYm9sXCI6XHJcbiAgICBjYXNlIFwiV2Vha01hcFwiOlxyXG4gICAgY2FzZSBcIldlYWtTZXRcIjpcclxuICAgIGNhc2UgXCJNYXBcIjpcclxuICAgIGNhc2UgXCJTZXRcIjpcclxuICAgICAgcmV0dXJuIGNvbnN0cnVjdG9yTmFtZTtcclxuICB9XHJcblxyXG4gIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodmFsKS5zbGljZSg4LCAtMSkudG9Mb3dlckNhc2UoKS5yZXBsYWNlKC9cXHMvZywgXCJcIik7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBBdHRlbXB0cyB0byBnZXQgdGhlIGNvbnN0cnVjdG9yIG5hbWUgb2YgYSB2YWx1ZS5cclxuICpcclxuICogVGhpcyBmdW5jdGlvbiBjaGVja3MgaWYgdGhlIHZhbHVlIGhhcyBhIGNvbnN0cnVjdG9yIHRoYXQgaXMgYSBmdW5jdGlvbixcclxuICogYW5kIGlmIHNvLCBpdCByZXR1cm5zIHRoZSBuYW1lIG9mIHRoZSBjb25zdHJ1Y3Rvci4gT3RoZXJ3aXNlLCBpdCByZXR1cm5zIG51bGwuXHJcbiAqXHJcbiAqIEBwYXJhbSB2YWwgLSBUaGUgdmFsdWUgdG8gZ2V0IHRoZSBjb25zdHJ1Y3RvciBuYW1lIGZvci5cclxuICogQHJldHVybnMgc3RyaW5nIC0gVGhlIG5hbWUgb2YgdGhlIGNvbnN0cnVjdG9yIChpZiBhcHBsaWNhYmxlKSwgb3RoZXJ3aXNlIG51bGwuXHJcbiAqL1xyXG5mdW5jdGlvbiBjdG9yTmFtZSh2YWw6IGFueSk6IHN0cmluZyB8IG51bGwge1xyXG4gIHJldHVybiB0eXBlb2YgdmFsLmNvbnN0cnVjdG9yID09PSBcImZ1bmN0aW9uXCIgPyB2YWwuY29uc3RydWN0b3IubmFtZSA6IG51bGw7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDaGVja3MgaWYgYSB2YWx1ZSBpcyBhbiBFcnJvciBvYmplY3QuXHJcbiAqXHJcbiAqIFRoaXMgZnVuY3Rpb24gdXNlcyB0d28gY3JpdGVyaWEgdG8gZGV0ZXJtaW5lIGlmIGEgdmFsdWUgaXMgYW4gRXJyb3I6XHJcbiAqICAgLSBJdCBjaGVja3MgaWYgdGhlIHZhbHVlIGlzIGFuIGluc3RhbmNlIG9mIHRoZSBidWlsdC1pbiBgRXJyb3JgIGNsYXNzLlxyXG4gKiAgIC0gSXQgY2hlY2tzIGlmIHRoZSB2YWx1ZSBoYXMgYSBzdHJpbmcgcHJvcGVydHkgbmFtZWQgXCJtZXNzYWdlXCIgYW5kIGEgY29uc3RydWN0b3Igd2l0aCBhIG51bWJlciBwcm9wZXJ0eSBuYW1lZCBcInN0YWNrVHJhY2VMaW1pdFwiLlxyXG4gKlxyXG4gKiBAcGFyYW0gdmFsIC0gVGhlIHZhbHVlIHRvIGNoZWNrIGlmIGl0J3MgYW4gRXJyb3IuXHJcbiAqIEByZXR1cm5zIGJvb2xlYW4gLSBUcnVlIGlmIHRoZSB2YWx1ZSBpcyBhbiBFcnJvciwgZmFsc2Ugb3RoZXJ3aXNlLlxyXG4gKi9cclxuZnVuY3Rpb24gaXNFcnJvcih2YWw6IGFueSk6IGJvb2xlYW4ge1xyXG4gIHJldHVybiB2YWwgaW5zdGFuY2VvZiBFcnJvciB8fCB0eXBlb2YgdmFsLm1lc3NhZ2UgPT09IFwic3RyaW5nXCIgJiYgdmFsLmNvbnN0cnVjdG9yICYmIHR5cGVvZiB2YWwuY29uc3RydWN0b3Iuc3RhY2tUcmFjZUxpbWl0ID09PSBcIm51bWJlclwiO1xyXG59XHJcblxyXG4vKipcclxuICogQ2hlY2tzIGlmIGEgdmFsdWUgaXMgYSBEYXRlIG9iamVjdC5cclxuICpcclxuICogVGhpcyBmdW5jdGlvbiB1c2VzIHR3byBhcHByb2FjaGVzIHRvIGRldGVybWluZSBpZiBhIHZhbHVlIGlzIGEgRGF0ZTpcclxuICogICAtIEl0IGNoZWNrcyBpZiB0aGUgdmFsdWUgaXMgYW4gaW5zdGFuY2Ugb2YgdGhlIGJ1aWx0LWluIGBEYXRlYCBjbGFzcy5cclxuICogICAtIEl0IGNoZWNrcyBpZiB0aGUgdmFsdWUgaGFzIGZ1bmN0aW9ucyBuYW1lZCBgdG9EYXRlU3RyaW5nYCwgYGdldERhdGVgLCBhbmQgYHNldERhdGVgLlxyXG4gKlxyXG4gKiBAcGFyYW0gdmFsIC0gVGhlIHZhbHVlIHRvIGNoZWNrIGlmIGl0J3MgYSBEYXRlLlxyXG4gKiBAcmV0dXJucyBib29sZWFuIC0gVHJ1ZSBpZiB0aGUgdmFsdWUgaXMgYSBEYXRlLCBmYWxzZSBvdGhlcndpc2UuXHJcbiAqL1xyXG5mdW5jdGlvbiBpc0RhdGUodmFsOiBhbnkpOiBib29sZWFuIHtcclxuICBpZiAodmFsIGluc3RhbmNlb2YgRGF0ZSlcclxuICAgIHJldHVybiB0cnVlO1xyXG5cclxuICByZXR1cm4gdHlwZW9mIHZhbC50b0RhdGVTdHJpbmcgPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgdmFsLmdldERhdGUgPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgdmFsLnNldERhdGUgPT09IFwiZnVuY3Rpb25cIjtcclxufVxyXG5cclxuLyoqXHJcbiAqIENoZWNrcyBpZiBhIHZhbHVlIGlzIGEgYm94ZWQgcHJpbWl0aXZlLlxyXG4gKlxyXG4gKiBUaGlzIGZ1bmN0aW9uIGNoZWNrcyBpZiBhIHZhbHVlIGlzIG5vdCBgdW5kZWZpbmVkYCBvciBgbnVsbGAsIGFuZCBpdHMgdmFsdWUgZG9lc24ndCBzdHJpY3RseSBlcXVhbCBpdHNlbGYgd2hlbiBjYWxsZWQgd2l0aCBgdmFsdWVPZigpYC5cclxuICogUHJpbWl0aXZlIHZhbHVlcyB3cmFwcGVkIGluIHRoZWlyIGNvcnJlc3BvbmRpbmcgb2JqZWN0IHJlcHJlc2VudGF0aW9ucyAoZS5nLiwgbmV3IE51bWJlcigxMCkpIGFyZSBjb25zaWRlcmVkIGJveGVkLlxyXG4gKlxyXG4gKiBAcGFyYW0gdmFsdWUgLSBUaGUgdmFsdWUgdG8gY2hlY2sgaWYgaXQncyBib3hlZC5cclxuICogQHJldHVybnMgYm9vbGVhbiAtIFRydWUgaWYgdGhlIHZhbHVlIGlzIGEgYm94ZWQgcHJpbWl0aXZlLCBmYWxzZSBvdGhlcndpc2UuXHJcbiAqL1xyXG5mdW5jdGlvbiBpc0JveGVkKHZhbHVlOiBhbnkpIHtcclxuICByZXR1cm4gdmFsdWUgIT09IHVuZGVmaW5lZCAmJiB2YWx1ZSAhPT0gbnVsbCAmJiB2YWx1ZS52YWx1ZU9mKCkgIT09IHZhbHVlO1xyXG59XHJcblxyXG4vKipcclxuICogQ2hlY2tzIGlmIGEgdmFsdWUgaXMgYSBQcm9taXNlIG9iamVjdC5cclxuICpcclxuICogVGhpcyBmdW5jdGlvbiB1c2VzIGEgdHJpY2sgdG8gaWRlbnRpZnkgcHJvbWlzZXMuIEl0IHJlc29sdmVzIHRoZSB2YWx1ZSB3aXRoIGBQcm9taXNlLnJlc29sdmVgIGFuZCBjb21wYXJlcyB0aGUgcmVzb2x2ZWQgdmFsdWUgd2l0aCB0aGUgb3JpZ2luYWwgdmFsdWUuXHJcbiAqIElmIHRoZXkgYXJlIHRoZSBzYW1lLCBpdCdzIGxpa2VseSBhIHByb21pc2UuXHJcbiAqXHJcbiAqIEBwYXJhbSB2YWx1ZSAtIFRoZSB2YWx1ZSB0byBjaGVjayBpZiBpdCdzIGEgUHJvbWlzZS5cclxuICogQHJldHVybnMgYm9vbGVhbiAtIFRydWUgaWYgdGhlIHZhbHVlIGlzIGEgUHJvbWlzZSwgZmFsc2Ugb3RoZXJ3aXNlLlxyXG4gKi9cclxuZnVuY3Rpb24gaXNQcm9taXNlKHZhbHVlOiBhbnkpIHtcclxuICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHZhbHVlKSA9PSB2YWx1ZTtcclxufVxyXG5cclxuLyoqXHJcbiAqIENoZWNrcyBpZiBhIHZhbHVlIGlzIGEgdmFsaWQgQWN0aW9uc3RhY2sgYWN0aW9uIG9iamVjdC5cclxuICpcclxuICogVGhpcyBmdW5jdGlvbiBkZXRlcm1pbmVzIGlmIHRoZSBwcm92aWRlZCB2YWx1ZSBpcyBhIHZhbGlkIGFjdGlvbiBvYmplY3RcclxuICogdXNlZCBpbiBBY3Rpb25zdGFjayBmb3IgZGlzcGF0Y2hpbmcgc3RhdGUgY2hhbmdlcy5cclxuICpcclxuICogQHBhcmFtIGFjdGlvbiAtIFRoZSB2YWx1ZSB0byBjaGVjayBpZiBpdCdzIGEgQWN0aW9uc3RhY2sgYWN0aW9uLlxyXG4gKiBAcmV0dXJucyBib29sZWFuIC0gVHJ1ZSBpZiB0aGUgdmFsdWUgaXMgYSBwbGFpbiBvYmplY3Qgd2l0aCBhIHN0cmluZyBwcm9wZXJ0eSBuYW1lZCBcInR5cGVcIiwgZmFsc2Ugb3RoZXJ3aXNlLlxyXG4gKi9cclxuZnVuY3Rpb24gaXNBY3Rpb24oYWN0aW9uOiBhbnkpOiBib29sZWFuIHtcclxuICByZXR1cm4gaXNQbGFpbk9iamVjdChhY3Rpb24pICYmIFwidHlwZVwiIGluIGFjdGlvbiAmJiB0eXBlb2YgYWN0aW9uLnR5cGUgPT09IFwic3RyaW5nXCI7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDaGVja3MgaWYgYSBmdW5jdGlvbiBpcyBhbiBhc3luYyBmdW5jdGlvbi5cclxuICpcclxuICogVGhpcyBmdW5jdGlvbiB1c2VzIHRoZSBjb25zdHJ1Y3RvciBuYW1lIHRvIGRldGVybWluZSBpZiB0aGUgcHJvdmlkZWQgZnVuY3Rpb25cclxuICogaXMgYW4gYXN5bmMgZnVuY3Rpb24gaW50cm9kdWNlZCBpbiBFUzIwMTguXHJcbiAqXHJcbiAqIEBwYXJhbSBmdW5jIC0gVGhlIGZ1bmN0aW9uIHRvIGNoZWNrIGlmIGl0J3MgYW4gYXN5bmMgZnVuY3Rpb24uXHJcbiAqIEByZXR1cm5zIGJvb2xlYW4gLSBUcnVlIGlmIHRoZSBmdW5jdGlvbidzIGNvbnN0cnVjdG9yIG5hbWUgaXMgXCJBc3luY0Z1bmN0aW9uXCIsIGZhbHNlIG90aGVyd2lzZS5cclxuICovXHJcbmZ1bmN0aW9uIGlzQXN5bmMoZnVuYzogRnVuY3Rpb24pIHtcclxuICByZXR1cm4gZnVuYy5jb25zdHJ1Y3Rvci5uYW1lID09PSBcIkFzeW5jRnVuY3Rpb25cIjtcclxufVxyXG5cclxuLyoqXHJcbiAqIENoZWNrcyBpZiBhIHZhbHVlIGlzIGEgcGxhaW4gb2JqZWN0LlxyXG4gKlxyXG4gKiBUaGlzIGZ1bmN0aW9uIGRldGVybWluZXMgaWYgdGhlIHByb3ZpZGVkIHZhbHVlIGlzIGEgcGxhaW4gb2JqZWN0IChhbiBvYmplY3RcclxuICogdGhhdCBkb2Vzbid0IGluaGVyaXQgZnJvbSBvdGhlciBwcm90b3R5cGVzKS5cclxuICpcclxuICogQHBhcmFtIG9iaiAtIFRoZSB2YWx1ZSB0byBjaGVjayBpZiBpdCdzIGEgcGxhaW4gb2JqZWN0LlxyXG4gKiBAcmV0dXJucyBib29sZWFuIC0gVHJ1ZSBpZiB0aGUgdmFsdWUgaXMgYW4gb2JqZWN0IGFuZCBpdHMgcHJvdG90eXBlIGlzIHRoZSBzYW1lIGFzIHRoZSBPYmplY3QucHJvdG90eXBlLCBmYWxzZSBvdGhlcndpc2UuXHJcbiAqL1xyXG5mdW5jdGlvbiBpc1BsYWluT2JqZWN0KG9iajogYW55KTogYm9vbGVhbiB7XHJcbiAgaWYgKHR5cGVvZiBvYmogIT09IFwib2JqZWN0XCIgfHwgb2JqID09PSBudWxsKVxyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG5cclxuICBsZXQgcHJvdG8gPSBvYmo7XHJcbiAgd2hpbGUgKE9iamVjdC5nZXRQcm90b3R5cGVPZihwcm90bykgIT09IG51bGwpIHtcclxuICAgIHByb3RvID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKHByb3RvKTtcclxuICB9XHJcblxyXG4gIHJldHVybiBPYmplY3QuZ2V0UHJvdG90eXBlT2Yob2JqKSA9PT0gcHJvdG87XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBUZXN0cyB0byBzZWUgaWYgdGhlIG9iamVjdCBpcyBhbiBSeEpTIHtAbGluayBPYnNlcnZhYmxlfVxyXG4gKiBAcGFyYW0gb2JqIHRoZSBvYmplY3QgdG8gdGVzdFxyXG4gKi9cclxuZnVuY3Rpb24gaXNPYnNlcnZhYmxlKG9iajogYW55KTogb2JqIGlzIE9ic2VydmFibGU8dW5rbm93bj4ge1xyXG4gIC8vIFRoZSAhISBpcyB0byBlbnN1cmUgdGhhdCB0aGlzIHB1YmxpY2x5IGV4cG9zZWQgZnVuY3Rpb24gcmV0dXJuc1xyXG4gIC8vIGBmYWxzZWAgaWYgc29tZXRoaW5nIGxpa2UgYG51bGxgIG9yIGAwYCBpcyBwYXNzZWQuXHJcbiAgcmV0dXJuICEhb2JqICYmIChvYmogaW5zdGFuY2VvZiBPYnNlcnZhYmxlIHx8ICh0eXBlb2Ygb2JqLmxpZnQgPT09ICdmdW5jdGlvbicgJiYgdHlwZW9mIG9iai5zdWJzY3JpYmUgPT09ICdmdW5jdGlvbicpKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIE9ic2VydmFibGUgdGhhdCBpbW1lZGlhdGVseSBjb21wbGV0ZXMgd2l0aG91dCBlbWl0dGluZyBhbnkgdmFsdWVzXHJcbiAqL1xyXG5leHBvcnQgY29uc3QgRU1QVFkgPSBuZXcgT2JzZXJ2YWJsZTxuZXZlcj4oKHN1YnNjcmliZXIpID0+IHtcclxuICBzdWJzY3JpYmVyLmNvbXBsZXRlKCk7XHJcbn0pO1xyXG5cclxuZXhwb3J0IHsgaXNBY3Rpb24sIGlzQXN5bmMsIGlzQm94ZWQsIGlzT2JzZXJ2YWJsZSwgaXNQbGFpbk9iamVjdCwgaXNQcm9taXNlLCBraW5kT2YgfTtcclxuXHJcbiJdfQ==